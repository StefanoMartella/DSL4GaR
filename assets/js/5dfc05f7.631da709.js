"use strict";(self.webpackChunkdsl_gamification=self.webpackChunkdsl_gamification||[]).push([[62],{3905:(e,t,n)=>{n.d(t,{Zo:()=>s,kt:()=>m});var i=n(7294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t){if(null==e)return{};var n,i,a=function(e,t){if(null==e)return{};var n,i,a={},r=Object.keys(e);for(i=0;i<r.length;i++)n=r[i],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(i=0;i<r.length;i++)n=r[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var p=i.createContext({}),d=function(e){var t=i.useContext(p),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},s=function(e){var t=d(e.components);return i.createElement(p.Provider,{value:t},e.children)},c={inlineCode:"code",wrapper:function(e){var t=e.children;return i.createElement(i.Fragment,{},t)}},u=i.forwardRef((function(e,t){var n=e.components,a=e.mdxType,r=e.originalType,p=e.parentName,s=o(e,["components","mdxType","originalType","parentName"]),u=d(n),m=a,g=u["".concat(p,".").concat(m)]||u[m]||c[m]||r;return n?i.createElement(g,l(l({ref:t},s),{},{components:n})):i.createElement(g,l({ref:t},s))}));function m(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var r=n.length,l=new Array(r);l[0]=u;var o={};for(var p in t)hasOwnProperty.call(t,p)&&(o[p]=t[p]);o.originalType=e,o.mdxType="string"==typeof e?e:a,l[1]=o;for(var d=2;d<r;d++)l[d]=n[d];return i.createElement.apply(null,l)}return i.createElement.apply(null,n)}u.displayName="MDXCreateElement"},1511:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>p,contentTitle:()=>l,default:()=>c,frontMatter:()=>r,metadata:()=>o,toc:()=>d});var i=n(7462),a=(n(7294),n(3905));const r={sidebar_position:3},l="Rule Deployment",o={unversionedId:"getting-started/usage/rule-deployment",id:"getting-started/usage/rule-deployment",title:"Rule Deployment",description:"Once the rules have been generated and tested, they are ready to be shipped in production (on the so called gamification engine) to make the final user enjoy the new game mechanics \ud83e\udd73.",source:"@site/docs/getting-started/usage/rule-deployment.md",sourceDirName:"getting-started/usage",slug:"/getting-started/usage/rule-deployment",permalink:"/DSL4GaR/docs/getting-started/usage/rule-deployment",draft:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/getting-started/usage/rule-deployment.md",tags:[],version:"current",sidebarPosition:3,frontMatter:{sidebar_position:3},sidebar:"tutorialSidebar",previous:{title:"Rule Simulation",permalink:"/DSL4GaR/docs/getting-started/usage/rule-simulation"},next:{title:"Playground",permalink:"/DSL4GaR/docs/category/playground"}},p={},d=[{value:"Deployer Instance",id:"deployer-instance",level:2},{value:"Rule Insertion/Update",id:"rule-insertionupdate",level:2},{value:"Rule Deletion",id:"rule-deletion",level:2}],s={toc:d};function c(e){let{components:t,...n}=e;return(0,a.kt)("wrapper",(0,i.Z)({},s,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"rule-deployment"},"Rule Deployment"),(0,a.kt)("p",null,"Once the rules have been generated and tested, they are ready to be shipped in production (on the so called gamification engine) to make the final user enjoy the new game mechanics \ud83e\udd73."),(0,a.kt)("h2",{id:"deployer-instance"},"Deployer Instance"),(0,a.kt)("p",null,"The first step to deploy the rules consists in establishing a connection with the gamification engine; this is possible through a ",(0,a.kt)("inlineCode",{parentName:"p"},"DeploymentService")," instance:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-java",metastring:'title="RuleDeployment.java"',title:'"RuleDeployment.java"'},'import it.univaq.gamification.deployment.services.DeploymentService;\nimport it.univaq.gamification.deployment.services.impl.DeploymentServiceImpl;\n\npublic class Deployer {\n\n  private static DeploymentService deployer;\n\n  public static DeploymentService getInstance() {\n    if (deployer == null) {\n      deployer = DeploymentServiceImpl\n        .builder()\n        .protocol("http")\n        .domain("localhost")\n        .port(8010)\n        .username("admin")\n        .password("password")\n        .build();\n    }\n    return deployer;\n  }\n}\n')),(0,a.kt)("admonition",{type:"caution"},(0,a.kt)("p",{parentName:"admonition"},"Set the protocol, domain, port, username and password according to your needs.")),(0,a.kt)("p",null,"The above snippet shows how it is possible to create a singleton that returns a ",(0,a.kt)("inlineCode",{parentName:"p"},"DeploymentServiceImpl")," instance that holds the connection to the gamification engine."),(0,a.kt)("h2",{id:"rule-insertionupdate"},"Rule Insertion/Update"),(0,a.kt)("p",null,"The ",(0,a.kt)("inlineCode",{parentName:"p"},"Deployer")," instance provides the ",(0,a.kt)("inlineCode",{parentName:"p"},"upsert")," method through which it is possible to deploy a rule on the gamification engine:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-java",metastring:'title="RuleDeployment.java - Rule upsert" {6-12}',title:'"RuleDeployment.java',"-":!0,Rule:!0,'upsert"':!0,"{6-12}":!0},'public static void main(String[] args) {\n  // Definition of the rules\n  PackageDescr rule1 = ...; \n  PackageDescr rule2 = ...;\n\n  Deployer.getInstance().upsert(\n    // The following is the id of the game on the gamification engine\n    "62df8ddc0055b0275113d374",\n    rule1,\n    rule2,\n    /// Other rules\n  );\n}\n')),(0,a.kt)("admonition",{type:"info"},(0,a.kt)("p",{parentName:"admonition"},"The ",(0,a.kt)("inlineCode",{parentName:"p"},"upsert")," method verifies, for each rule passed as parameter, if the gamification engine already contains a rule with the same name, if that is the case the rule is updated on the engine otherwise it is inserted as a new one.")),(0,a.kt)("p",null,"The above code will produce a similar output:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},'2023-01-29 17:48:17,695  INFO | main | i.u.g.deployment.services.impl.DeploymentServiceImpl    | PENDING - Retrieving rules of game with ID 62df8ddc0055b0275113d374... \n2023-01-29 17:48:18,187  INFO | main | i.u.g.deployment.services.impl.DeploymentServiceImpl    | SUCCESS - Rules of game 62df8ddc0055b0275113d374 retrieved \n2023-01-29 17:48:18,410  INFO | main | i.u.g.deployment.services.impl.DeploymentServiceImpl    | PENDING - Adding rule "rule1" to game with ID 62df8ddc0055b0275113d374... \n2023-01-29 17:48:18,539  INFO | main | i.u.g.deployment.services.impl.DeploymentServiceImpl    | SUCCESS - Rule "rule1" added to game with ID 62df8ddc0055b0275113d374 \n2023-01-29 17:48:18,541  INFO | main | i.u.g.deployment.services.impl.DeploymentServiceImpl    | PENDING - PENDING - Editing rule "rule2" (ID: 63d6a352e392ba20b7009a78) to game with ID 62df8ddc0055b0275113d374...\n2023-01-29 17:48:18,617  INFO | main | i.u.g.deployment.services.impl.DeploymentServiceImpl    | SUCCESS - Rule "rule2" (ID: 63d6a352e392ba20b7009a79) edited at game with ID 62df8ddc0055b0275113d374 \n')),(0,a.kt)("h2",{id:"rule-deletion"},"Rule Deletion"),(0,a.kt)("p",null,"The ",(0,a.kt)("inlineCode",{parentName:"p"},"Deployer")," instance also provides the ",(0,a.kt)("inlineCode",{parentName:"p"},"delete")," method through which it is possible remove previously deployed rules from the gamification engine:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-java",metastring:'title="RuleDeployment.java - Rule deletion" {6-12}',title:'"RuleDeployment.java',"-":!0,Rule:!0,'deletion"':!0,"{6-12}":!0},'public static void main(String[] args) {\n  // Definition of the rules\n  PackageDescr rule1 = ...; \n  PackageDescr rule2 = ...;\n\n  Deployer.getInstance().delete(\n    // The following is the id of the game on the gamification engine\n    "62df8ddc0055b0275113d374",\n    rule1,\n    rule2,\n    /// Other rules\n  );\n}\n')),(0,a.kt)("p",null,"The above code will produce a similar output:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"2023-01-29 17:51:47,378  INFO | main | i.u.g.deployment.services.impl.DeploymentServiceImpl    | PENDING - Retrieving rules of game with ID 62df8ddc0055b0275113d374... \n2023-01-29 17:51:47,868  INFO | main | i.u.g.deployment.services.impl.DeploymentServiceImpl    | SUCCESS - Rules of game 62df8ddc0055b0275113d374 retrieved \n2023-01-29 17:51:47,974  INFO | main | i.u.g.deployment.services.impl.DeploymentServiceImpl    | PENDING - Deleting rule with ID 63d6a352e392ba20b7009a77 to game with ID 62df8ddc0055b0275113d374... \n2023-01-29 17:51:48,052  INFO | main | i.u.g.deployment.services.impl.DeploymentServiceImpl    | SUCCESS - Rule with ID 63d6a352e392ba20b7009a77 deleted at game with ID 62df8ddc0055b0275113d374 \n2023-01-29 17:51:48,053  INFO | main | i.u.g.deployment.services.impl.DeploymentServiceImpl    | PENDING - Deleting rule with ID 63d6a352e392ba20b7009a78 to game with ID 62df8ddc0055b0275113d374... \n2023-01-29 17:51:48,118  INFO | main | i.u.g.deployment.services.impl.DeploymentServiceImpl    | SUCCESS - Rule with ID 63d6a352e392ba20b7009a78 deleted at game with ID 62df8ddc0055b0275113d374 \n")))}c.isMDXComponent=!0}}]);